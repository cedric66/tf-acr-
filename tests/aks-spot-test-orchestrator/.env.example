# ===================================================================
# AKS Spot Test Orchestrator - Environment Configuration
# ===================================================================
# Copy this file to .env and configure with your cluster details.
# This is the SINGLE SOURCE OF TRUTH for all test suites.
#
# See README.md for detailed setup instructions.
# ===================================================================

# === Cluster Identity (REQUIRED) ===
CLUSTER_NAME=aks-spot-prod
RESOURCE_GROUP=rg-aks-spot
LOCATION=australiaeast
NAMESPACE=robot-shop

# === Node Pool Names ===
# System pool (always on-demand)
SYSTEM_POOL=system

# Standard fallback pool (on-demand)
STANDARD_POOL=stdworkload

# Spot pools (comma-separated list)
# These are the spot node pools that tests will validate
SPOT_POOLS=spotgeneral1,spotmemory1,spotgeneral2,spotcompute,spotmemory2

# === VM Sizes (per pool) ===
# Configure expected VM sizes for each pool
# Format: SIZE_<poolname>=<vm_size>
SIZE_system=Standard_D4s_v5
SIZE_stdworkload=Standard_D4s_v5
SIZE_spotgeneral1=Standard_D4s_v5
SIZE_spotmemory1=Standard_E4s_v5
SIZE_spotgeneral2=Standard_D4s_v5
SIZE_spotcompute=Standard_F4s_v2
SIZE_spotmemory2=Standard_E4s_v5

# === Availability Zones (per pool) ===
# Configure expected zones for each pool
# Format: ZONES_<poolname>=<comma-separated-zones>
ZONES_system=1,2,3
ZONES_stdworkload=1,2,3
ZONES_spotgeneral1=1
ZONES_spotmemory1=2
ZONES_spotgeneral2=3
ZONES_spotcompute=1
ZONES_spotmemory2=2

# === Priority Configuration (per pool) ===
# Configure expected priority for each pool
# Format: PRIORITY_<poolname>=<Spot|Regular>
PRIORITY_system=Regular
PRIORITY_stdworkload=Regular
PRIORITY_spotgeneral1=Spot
PRIORITY_spotmemory1=Spot
PRIORITY_spotgeneral2=Spot
PRIORITY_spotcompute=Spot
PRIORITY_spotmemory2=Spot

# === Node Count Ranges (per pool) ===
# Configure expected min/max node counts
# Format: MIN_NODES_<poolname>=<number>
#         MAX_NODES_<poolname>=<number>
MIN_NODES_system=3
MAX_NODES_system=5
MIN_NODES_stdworkload=2
MAX_NODES_stdworkload=15
MIN_NODES_spotgeneral1=0
MAX_NODES_spotgeneral1=50
MIN_NODES_spotmemory1=0
MAX_NODES_spotmemory1=50
MIN_NODES_spotgeneral2=0
MAX_NODES_spotgeneral2=50
MIN_NODES_spotcompute=0
MAX_NODES_spotcompute=50
MIN_NODES_spotmemory2=0
MAX_NODES_spotmemory2=50

# === Test Configuration ===
# Pod graceful shutdown configuration
TERMINATION_GRACE_PERIOD=35
PRESTOP_SLEEP=25

# Pod readiness timeout (seconds)
POD_READY_TIMEOUT=120

# Test namespaces (comma-separated)
TEST_NAMESPACES=robot-shop,default

# === Azure CLI Configuration ===
# Subscription ID (optional - uses current az account if not set)
# ARM_SUBSCRIPTION_ID=00000000-0000-0000-0000-000000000000

# Tenant ID (optional - uses current az account if not set)
# ARM_TENANT_ID=00000000-0000-0000-0000-000000000000

# === Terratest Configuration ===
# Enable integration tests (creates real Azure resources)
# RUN_INTEGRATION_TESTS=false

# === Debugging ===
# Enable verbose output
# VERBOSE=false

# Set kubectl context (optional - uses current context if not set)
# KUBECTL_CONTEXT=aks-spot-prod
